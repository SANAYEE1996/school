<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE mapper PUBLIC "-
//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace ="com.example.mapper.UserMapper">

    <select id="getUserList" resultType="com.example.vo.UserVo">
        SELECT * from Users
    </select>

    <select id="getUser" resultType="com.example.vo.UserVo">
        select * from Users where id = #{id}
    </select>

    <insert id="createUser">
        insert into Users (name, id) values(#{name}, #{id})
    </insert>

    <delete id="deleteUser">
        delete from Users where id = #{id}
    </delete>

    <update id="updateUser">
        update Users set name = #{name} where id = #{id}
    </update>

    <select id="login" resultType="com.example.vo.UserVo">
        select * from Users where id= #{id} and password = #{password}
    </select>

    <select id="getChannelList" resultType="com.example.vo.ChannelVO">
        select ch_url, ch_name, sub, category from channel;
    </select>

    <select id="listCountCriteria" resultType="int">
        
            select
                count(*)
            from
                channel
        
    </select>

    <select id="listCriteria" resultType="com.example.vo.ChannelVO">
        select ch_url, ch_name, sub, category from channel order by sub desc limit #{pageStart}, #{perPageNum}
    </select>

    <select id="filterPage" resultType="com.example.vo.ChannelVO">
      
        select ch_url, ch_name, sub, category
        from channel
        where 
        category = #{category}
        <choose>
            <when test = "sub == 100000">and sub between 0 and 100000</when>
            <when test = "sub == 1000000">and sub between 100000 and 1000000</when>
            <when test = "sub == 10000000">and sub between 1000000 and 10000000</when>
            <when test = "sub == 100000000">and sub between 10000000 and 1000000000</when>
        </choose>
        limit #{pageStart}, #{perPageNum}
      
    </select>

    <select id="filterPageCount" resultType="int">
        
        select
            count(*)
        from
            channel
        where 
        category = #{category}
        <choose>
            <when test = "sub == 100000">and sub between 0 and 100000</when>
            <when test = "sub == 1000000">and sub between 100000 and 1000000</when>
            <when test = "sub == 10000000">and sub between 1000000 and 10000000</when>
            <when test = "sub == 100000000">and sub between 10000000 and 1000000000</when>
        </choose>
    </select>

</mapper>